# üìê SEGMENT 2: ADVANCED PROMPTING TECHNIQUES

**The Technical Layer: Mastering Constitutional Prompt Engineering**

---

## üìú CONSTITUTIONAL AUTHORITY

This segment establishes the **technical methodologies** for generating constitutional prompts that produce production-ready code. Every prompt generated by MVCA (Minimum Viable Coding Assistant) follows these techniques.

**Legal Force:**
- ‚úÖ MVCA **MUST** follow these prompt engineering techniques
- ‚úÖ All prompts **SHALL** use the 7-component structure (Article I)
- ‚úÖ All prompts **SHALL** apply appropriate patterns (Article II)
- ‚úÖ All prompts **SHALL** include proper context (Article III)
- ‚úÖ Manual prompt creation **MAY** follow these guidelines (optional for users)

**Constitutional Principle:**
> Quality prompts generate quality code.  
> Constitutional prompts generate constitutional code.

---

## üéØ SEGMENT PURPOSE

### Why Segment 2 Exists

**Problem:**
Most AI-generated code fails in production because prompts are:
- Too vague (AI guesses and gets it wrong)
- Missing security context (AI uses insecure patterns)
- Missing accessibility requirements (AI creates inaccessible UI)
- Missing error handling (AI doesn't consider edge cases)

**Solution:**
Constitutional prompting methodology that:
- Structures prompts in 7 mandatory components
- Applies proven patterns for different scenarios
- Injects multi-layer context
- Enforces security and quality mandates

**Result:**
```
Vague Prompt: "Create login page"
‚Üí AI generates: Basic HTML form (no security, no accessibility)

Constitutional Prompt: [7-component structure with Commandments I-IV]
‚Üí AI generates: NextAuth.js integration, bcrypt, rate limiting, WCAG AA
```

---

## üìö THE THREE ARTICLES

### Article I: Anatomy of a Constitutional Prompt

**Purpose:** Define the 7-component structure that EVERY constitutional prompt must follow.

**Key Concepts:**
- Component 1: Persona Assignment (who is AI pretending to be?)
- Component 2: Context Injection (5-layer context stack)
- Component 3: Task Definition (what to build, scope boundaries)
- Component 4: Requirements Specification (functional + non-functional)
- Component 5: Security Mandates (OWASP Top 10 + constitutional commandments)
- Component 6: Meta-Instructions (thinking process, constraints, best practices)
- Component 7: Output Format & Validation (deliverables + verification)

**Location:** [Article I: Anatomy](./01-article-i-anatomy.md)

---

### Article II: The Twelve Patterns

**Purpose:** Define the 12 prompt patterns for different development scenarios.

**The 12 Patterns:**
1. **Scaffolding Pattern** - Building project structure
2. **Delta Editing Pattern** - Modifying existing code
3. **Chain of Thought Pattern** - Complex problem solving
4. **Debugging Pattern** - Finding and fixing bugs
5. **Integration Pattern** - Connecting systems
6. **Refactoring Pattern** - Improving code quality
7. **Testing Pattern** - Creating tests
8. **Documentation Pattern** - Generating docs
9. **Code Review Pattern** - Reviewing code quality
10. **Performance Optimization Pattern** - Speeding up code
11. **Security Audit Pattern** - Finding vulnerabilities
12. **Accessibility Audit Pattern** - WCAG compliance check

**Location:** [Article II: Twelve Patterns](./02-article-ii-twelve-patterns.md)

---

### Article III: The 5-Layer Context Stack

**Purpose:** Define how to structure context for maximum AI understanding.

**The 5 Layers:**
1. **Layer 1: Project Identity** - What is this project? (name, type, industry, stage)
2. **Layer 2: Business Context** - Why does it exist? (problem, users, value prop)
3. **Layer 3: Technical Context** - How is it built? (stack, conventions, architecture)
4. **Layer 4: Feature Context** - What are we building now? (user story, acceptance criteria)
5. **Layer 5: Constraints Context** - What limits us? (budget, timeline, compliance)

**Location:** [Article III: Context Stack](./03-article-iii-context-stack.md)

---

## üîÑ HOW THESE ARTICLES WORK TOGETHER

### The Constitutional Prompting Workflow
```
USER REQUEST: "I need authentication"
       ‚Üì
MVCA ANALYZES REQUEST (Protocol 1: Input Processing)
       ‚Üì
MVCA LOADS CONSTITUTIONAL MANDATES (Protocol 2: Constitutional Consultation)
       - Commandment III: Password Security (bcrypt)
       - Commandment IV: Session Management
       - Commandment V: Rate Limiting
       ‚Üì
MVCA SELECTS PATTERN (Article II: Twelve Patterns)
       - Pattern #1: Scaffolding (build structure first)
       ‚Üì
MVCA GATHERS CONTEXT (Article III: 5-Layer Stack)
       - Layer 1: Project Identity
       - Layer 3: Technical Context (Next.js, Prisma)
       - Layer 4: Feature Context (user login requirement)
       ‚Üì
MVCA GENERATES PROMPT (Article I: 7-Component Anatomy)
       - Component 1: Persona (senior full-stack developer)
       - Component 2: Context (Next.js 15, TypeScript, Prisma)
       - Component 3: Task (scaffold NextAuth.js authentication)
       - Component 4: Requirements (email/password + OAuth)
       - Component 5: Security Mandates (bcrypt, rate limiting)
       - Component 6: Meta-Instructions (NextAuth.js best practices)
       - Component 7: Output Format (files + validation checklist)
       ‚Üì
CONSTITUTIONAL PROMPT DELIVERED TO USER
       ‚Üì
USER PASTES TO AI CODING ASSISTANT (Claude, GPT-4, etc.)
       ‚Üì
AI GENERATES CONSTITUTIONAL CODE
       - Bcrypt hashing ‚úì
       - Rate limiting ‚úì
       - CSRF protection ‚úì
       - Database sessions ‚úì
       - Production-ready ‚úì
```

---

## üìä SEGMENT 2 METRICS

### What You'll Learn
```
AFTER COMPLETING SEGMENT 2, YOU WILL UNDERSTAND:

‚úì How to structure prompts for maximum AI comprehension
‚úì Which pattern to use for which scenario
‚úì How to inject context effectively (5-layer stack)
‚úì How to enforce constitutional mandates in prompts
‚úì How MVCA generates prompts internally
‚úì How to create constitutional prompts manually (without MVCA)
‚úì Why constitutional prompts produce better code than vague prompts

SKILLS GAINED:
‚úì Advanced prompt engineering
‚úì AI-assisted development methodology
‚úì Constitutional code generation techniques
‚úì Context management strategies
```

---

## üéì WHO SHOULD READ SEGMENT 2

### Audience Classification

**MUST READ (Mandatory):**
- MVCA developers (building/maintaining MVCA system)
- Constitutional prompt contributors
- Anyone modifying prompt generation logic

**SHOULD READ (Highly Recommended):**
- Advanced users who want to understand MVCA internals
- Developers creating similar constitutional systems
- Prompt engineering researchers

**MAY READ (Optional):**
- Non-coders curious about how MVCA works
- Users wanting to create manual constitutional prompts
- Technical writers documenting AI-assisted development

**CAN SKIP:**
- Non-coders who just want to use MVCA (Segment 1 is sufficient)
- Beginners starting their first project (come back later)

---

## üîó RELATIONSHIP TO OTHER SEGMENTS

### Segment Dependencies
```
SEGMENT 1 (Foundation Layer)
‚îú‚îÄ Article I: Immutable Laws ‚Üí Enforced by Segment 2 prompts
‚îú‚îÄ Article II: STRATEG ‚Üí Segment 2 prompts guide through phases
‚îú‚îÄ Article IV: Protocols ‚Üí Protocol 5 uses Segment 2 techniques
‚îú‚îÄ Article V: Checkpoints ‚Üí Segment 2 prompts include checkpoints
‚îî‚îÄ Article VI: Commandments ‚Üí Component 5 injects commandments

SEGMENT 2 (Technique Layer) ‚Üê YOU ARE HERE
‚îú‚îÄ Article I: Anatomy ‚Üí Template for all prompts
‚îú‚îÄ Article II: Patterns ‚Üí Decision tree for pattern selection
‚îî‚îÄ Article III: Context ‚Üí Context injection mechanism

SEGMENT 3 (Tooling Layer)
‚îú‚îÄ Will use Segment 2 patterns for tool integrations
‚îî‚îÄ Will extend context stack with tool-specific context

SEGMENT 4 (Execution Layer)
‚îú‚îÄ Will implement Segment 2 patterns in orchestration
‚îî‚îÄ Will manage context across multi-turn conversations

SEGMENT 5 (Quality Layer)
‚îú‚îÄ Will validate prompts against Segment 2 standards
‚îî‚îÄ Will measure prompt quality scores

SEGMENT 6 (Deployment Layer)
‚îú‚îÄ Will use Segment 2 patterns for deployment prompts
‚îî‚îÄ Will include production context

SEGMENT 7 (Governance Layer)
‚îú‚îÄ Will evolve Segment 2 through evidence-based governance
‚îî‚îÄ Will version Segment 2 articles
```

---

## üìñ READING ORDER

### Recommended Progression
```
FOR MVCA DEVELOPERS:
1. Read Article I: Anatomy (understand 7-component structure)
2. Read Article II: Patterns (learn all 12 patterns)
3. Read Article III: Context Stack (master context injection)
4. Practice: Generate prompts manually using these techniques
5. Review: MVCA code implementation (mvca-brain/prompt-generator.md)

FOR ADVANCED USERS:
1. Read Article I: Anatomy (learn structure)
2. Skim Article II: Patterns (know what exists, deep-dive when needed)
3. Read Article III: Context Stack (understand context layers)
4. Apply: Create manual constitutional prompts for your projects

FOR RESEARCHERS:
1. Read all three articles sequentially
2. Compare with other prompt engineering methodologies
3. Analyze effectiveness metrics (Segment 5)
4. Contribute improvements via governance (Segment 7)
```

---

## üõ†Ô∏è PRACTICAL APPLICATION

### Using Segment 2 Knowledge

**Scenario 1: You're using MVCA**
- Segment 2 helps you understand WHY MVCA asks certain questions
- You'll know what context to provide for better prompts
- You'll understand MVCA's pattern selection decisions

**Scenario 2: You're creating prompts manually**
- Use Article I as a template (7-component checklist)
- Use Article II to select appropriate pattern
- Use Article III to structure your context
- Result: Constitutional-quality prompts without MVCA

**Scenario 3: You're building a similar system**
- Segment 2 is the blueprint for prompt generation
- Adapt patterns to your domain (mobile, data science, etc.)
- Maintain constitutional principles (security, accessibility)

**Scenario 4: You're debugging MVCA**
- Article I helps diagnose missing components
- Article II explains pattern selection logic
- Article III clarifies context injection issues

---

## üìä QUALITY METRICS

### Segment 2 Standards
```
CONSTITUTIONAL PROMPT QUALITY SCORE:

Component Completeness:     /7  (all 7 components present?)
Pattern Appropriateness:    /5  (correct pattern selected?)
Context Sufficiency:        /5  (enough context provided?)
Mandate Enforcement:       /10  (all relevant commandments?)
Clarity:                    /5  (AI can understand?)
Specificity:                /5  (not vague or ambiguous?)
Testability:                /5  (validation checklist?)

TOTAL SCORE:               /42

GRADING:
38-42: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Constitutional Excellence
32-37: ‚≠ê‚≠ê‚≠ê‚≠ê High Quality
26-31: ‚≠ê‚≠ê‚≠ê Acceptable
20-25: ‚≠ê‚≠ê Needs Improvement
<20:   ‚≠ê Non-Constitutional (rework required)
```

---

## üîç EXAMPLES

### Before & After Constitutional Prompting

#### Example 1: Authentication

**BEFORE (Vague Prompt):**
```
"Create a login page"
```

**AI Output:**
```html
<form>
  <input type="text" name="username">
  <input type="password" name="password">
  <button>Login</button>
</form>
```

**Problems:**
- No backend integration
- Passwords sent in plaintext
- No rate limiting
- Not accessible
- No error handling

---

**AFTER (Constitutional Prompt - 7 Components):**
```markdown
COMPONENT 1: PERSONA ASSIGNMENT
You are a senior full-stack developer specializing in Next.js authentication...

COMPONENT 2: CONTEXT INJECTION
Project: TaskMaster Pro (SaaS task management)
Stack: Next.js 15, TypeScript, Prisma, PostgreSQL
...

COMPONENT 3: TASK DEFINITION
Scaffold NextAuth.js v5 authentication with email/password and Google OAuth
...

COMPONENT 4: REQUIREMENTS SPECIFICATION
- Email/password authentication
- Google OAuth (one-click login)
- Rate limiting: 5 attempts / 15 min
...

COMPONENT 5: SECURITY MANDATES (Constitutional)
- Commandment III: bcrypt hashing (cost 12)
- Commandment IV: Database sessions (not JWT)
- Commandment V: Rate limiting
...

COMPONENT 6: META-INSTRUCTIONS
Use NextAuth.js v5 (latest)
Database-backed sessions (Prisma adapter)
...

COMPONENT 7: OUTPUT FORMAT & VALIDATION
Deliverables:
- lib/auth.ts (NextAuth config)
- app/api/auth/[...nextauth]/route.ts
- Prisma schema updates
Validation: TypeScript compiles, bcrypt configured
```

**AI Output:**
```typescript
// Complete NextAuth.js implementation
// - bcrypt password hashing ‚úì
// - Database sessions ‚úì
// - Rate limiting ‚úì
// - CSRF protection ‚úì
// - Accessible login form ‚úì
// - Production-ready ‚úì
```

---

#### Example 2: API Endpoint

**BEFORE (Vague):**
```
"Create API endpoint to get user profile"
```

**AFTER (Constitutional):**
```markdown
[7-component prompt with:]
- Pattern #1 (Scaffolding)
- Commandment I (Input Validation)
- Commandment VI (Authorization - ownership check)
- Layer 3 Context (Next.js API Routes, Prisma)
- Validation checklist (authentication, authorization, error handling)
```

**Result:** Production-ready API with authentication, authorization, validation, error handling

---

## üéØ SUCCESS CRITERIA

### When You've Mastered Segment 2

You'll be able to:
```
‚úì Generate constitutional prompts manually (without MVCA)
‚úì Select the appropriate pattern for any scenario
‚úì Structure context in 5 layers effectively
‚úì Identify missing components in existing prompts
‚úì Explain why constitutional prompts produce better code
‚úì Teach others constitutional prompting techniques
‚úì Contribute pattern improvements via governance
‚úì Debug MVCA prompt generation issues
‚úì Adapt techniques to non-web-dev domains
‚úì Create prompt templates for your team
```

---

## üìö ARTICLES IN THIS SEGMENT

### Quick Navigation

1. **[Article I: Anatomy of a Constitutional Prompt](./01-article-i-anatomy.md)**
   - 7-Component Structure
   - Component-by-component breakdown
   - Examples for each component
   - Common mistakes to avoid

2. **[Article II: The Twelve Patterns](./02-article-ii-twelve-patterns.md)**
   - Pattern #1-12 detailed specifications
   - When to use each pattern
   - Pattern selection decision tree
   - Pattern combination strategies

3. **[Article III: The 5-Layer Context Stack](./03-article-iii-context-stack.md)**
   - Layer 1: Project Identity
   - Layer 2: Business Context
   - Layer 3: Technical Context
   - Layer 4: Feature Context
   - Layer 5: Constraints Context
   - Context minimization strategies

---

## üîó EXTERNAL REFERENCES

### Related Resources

**MVCA Brain Documentation:**
- [mvca-brain/prompt-generator.md](../../mvca-brain/core/prompt-generator.md) - Implementation details
- [mvca-brain/decision-trees/pattern-selection.md](../../mvca-brain/decision-trees/pattern-selection.md) - Pattern selection logic

**Knowledge Base:**
- [knowledge-base/patterns/validated/](../../knowledge-base/patterns/validated/) - Proven prompt patterns

**Examples:**
- [examples/auth-system/](../../examples/auth-system/) - Complete authentication example

---

**Previous Segment:** [‚Üê Segment 1: Foundation Layer](../01-foundation-layer/README.md)  
**Next Article:** [Article I: Anatomy ‚Üí](./01-article-i-anatomy.md)  
**Next Segment:** [Segment 3: Tooling Layer ‚Üí](../03-tooling-layer/README.md)

---

**Last Updated:** February 7, 2026  
**Constitutional Version:** 2.0.0  
**Segment Status:** ‚úÖ Active Development

**Motto:** *"Structure Breeds Excellence - Constitutional Prompts Generate Constitutional Code"*
